clc;clear all;

n = 2;% input('Enter number of buildings in urban environment: ');

rotate3d;

z = 1000;%input('Enter the height of UAV: ');
const1 = 0;const2 = 1500;

R = [750,750,0];%input('Enter the point on the road: ');


%plot3(R(1,1),R(1,2),0,'-x');


ad = [500,300,500];%input('Enter [l,w,h] of 1st building: ');
bd = [500,300,300];%input('Enter [l,w,h] of 2nd 1building: ');
cd = [500,400,200];%input('Enter [l,w,h] of 1st building: ');
dd = [500,400,300];%input('Enter [l,w,h] of 2nd 1building: ');
wr = 200;%input('Enter width of the road: ');

a = [0,1125,0];%input('Enter centre of building: ');
b = [0,375,0];
c = [0,375,0];
d = [0,1125,0];
a(1,1) = 750 + (wr/2) + (ad(1,2)/2);
b(1,1) = 750 + (wr/2) + (bd(1,2)/2);
c(1,1) = 750 - (wr/2) - (cd(1,2)/2);
d(1,1) = 750 - (wr/2) - (dd(1,2)/2);

la = ad(1,1);wa = ad(1,2);ha = ad(1,3);

lb = bd(1,1);wb = bd(1,2);hb = bd(1,3);

lc = cd(1,1);wc = cd(1,2);hc = cd(1,3);

ld = dd(1,1);wd = dd(1,2);hd = dd(1,3);

wrs = 375-(la/2) + 375 - (lb/2);





if (R(1,2)<=1125+(la/2)) && (R(1,2)>=1125-(la/2)) && (R(1,2)<=1125+(ld/2)) && (R(1,2)>=1125-(ld/2)) 

P1(1,1) = R(1,1) + (wr/2)*((const2 - R(1,2))/(1125+(la/2) - R(1,2)));P1(1,2) = const2;

P2(1,1) = R(1,1) + (wr/2)*(z/ha);P2(1,2) = R(1,2) + (1125+(la/2)- R(1,2))*(z/ha);

P3(1,1) = R(1,1) + (wr/2)*(z/ha);P3(1,2) = R(1,2) + (1125 - (la/2) - R(1,2))*(z/ha);

P4(1,1) = R(1,1) + (wr/2)*((const1 - R(1,2))/(1125 -(la/2) - R(1,2)));P4(1,2) = const1;

P5(1,1) = R(1,1) + (-wr/2)*((const1 - R(1,2))/(1125 -(ld/2) - R(1,2)));P5(1,2) = const1;

P6(1,1) = R(1,1) + (-wr/2)*(z/hd);P6(1,2) = R(1,2) + (1125 -(ld/2) - R(1,2))*(z/hd);

P7(1,1) = R(1,1) + (-wr/2)*(z/hd);P7(1,2) = R(1,2) + (1125 +(ld/2) - R(1,2))*(z/hd);

P8(1,1) = R(1,1) + (-wr/2)*((const2 - R(1,2))/(1125 +(ld/2) - R(1,2)));P8(1,2) = const2;

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1)];
Y= [P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2)];
Z = [z z z z z z z z];

end



if (R(1,2)<=1125+(la/2)) && (R(1,2)>=1125-(la/2)) && (R(1,2)<=1125+(ld/2)) && (R(1,2)>=1125-(ld/2)) 

P1(1,1) = R(1,1) + (wr/2)*((const2 - R(1,2))/(1125+(la/2) - R(1,2)));P1(1,2) = const2;

P2(1,1) = R(1,1) + (wr/2)*(z/ha);P2(1,2) = R(1,2) + (1125+(la/2)- R(1,2))*(z/ha);

P3(1,1) = R(1,1) + (wr/2)*(z/ha);P3(1,2) = R(1,2) + (1125 - (la/2) - R(1,2))*(z/ha);

P4(1,1) = R(1,1) + (wr/2)*((const1 - R(1,2))/(1125 -(la/2) - R(1,2)));P4(1,2) = const1;

P5(1,1) = R(1,1) + (-wr/2)*((const1 - R(1,2))/(1125 -(ld/2) - R(1,2)));P5(1,2) = const1;

P6(1,1) = R(1,1) + (-wr/2)*(z/hd);P6(1,2) = R(1,2) + (1125 -(ld/2) - R(1,2))*(z/hd);

P7(1,1) = R(1,1) + (-wr/2)*(z/hd);P7(1,2) = R(1,2) + (1125 +(ld/2) - R(1,2))*(z/hd);

P8(1,1) = R(1,1) + (-wr/2)*((const2 - R(1,2))/(1125 +(ld/2) - R(1,2)));P8(1,2) = const2;

X= [P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1)];
Y= [P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2)];
Z = [z z z z z z z z];

end



if (R(1,2)<=375+(lb/2)) && (R(1,2)>=375-(lb/2)) && (R(1,2)<=375+(lc/2)) && (R(1,2)>=375-(lc/2)) 

P1(1,1) = R(1,1) + (wr/2)*((const2 - R(1,2))/(375+(lb/2) - R(1,2)));P1(1,2) = const2;

P2(1,1) = R(1,1) + (wr/2)*(z/hb);P2(1,2) = R(1,2) + (375+(lb/2)- R(1,2))*(z/hb);

P3(1,1) = R(1,1) + (wr/2)*(z/hb);P3(1,2) = R(1,2) + (375 - (lb/2) - R(1,2))*(z/hb);

P4(1,1) = R(1,1) + (wr/2)*((const1 - R(1,2))/(375 -(lb/2) - R(1,2)));P4(1,2) = const1;

P5(1,1) = R(1,1) + (-wr/2)*((const1 - R(1,2))/(375 -(lc/2) - R(1,2)));P5(1,2) = const1;

P6(1,1) = R(1,1) + (-wr/2)*(z/hc);P6(1,2) = R(1,2) + (375 -(lc/2) - R(1,2))*(z/hc);

P7(1,1) = R(1,1) + (-wr/2)*(z/hc);P7(1,2) = R(1,2) + (375 +(lc/2) - R(1,2))*(z/hc);

P8(1,1) = R(1,1) + (-wr/2)*((const2 - R(1,2))/(375 +(lc/2) - R(1,2)));P8(1,2) = const2;

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1)];
Y = [P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2)];
Z = [z z z z z z z z];

end

if (R(1,2)<=375+(lb/2)) && (R(1,2)>=375-(lb/2)) && (R(1,2)<=375+(lc/2)) && (R(1,2)>=375-(lc/2)) 

P1(1,1) = R(1,1) + (wr/2)*((const2 - R(1,2))/(375+(lb/2) - R(1,2)));P1(1,2) = const2;

P2(1,1) = R(1,1) + (wr/2)*(z/hb);P2(1,2) = R(1,2) + (375+(lb/2)- R(1,2))*(z/hb);

P3(1,1) = R(1,1) + (wr/2)*(z/hb);P3(1,2) = R(1,2) + (375 - (lb/2) - R(1,2))*(z/hb);

P4(1,1) = R(1,1) + (wr/2)*((const1 - R(1,2))/(375 -(lb/2) - R(1,2)));P4(1,2) = const1;

P5(1,1) = R(1,1) + (-wr/2)*((const1 - R(1,2))/(375 -(lc/2) - R(1,2)));P5(1,2) = const1;

P6(1,1) = R(1,1) + (-wr/2)*(z/hc);P6(1,2) = R(1,2) + (375 -(lc/2) - R(1,2))*(z/hc);

P7(1,1) = R(1,1) + (-wr/2)*(z/hc);P7(1,2) = R(1,2) + (375 +(lc/2) - R(1,2))*(z/hc);

P8(1,1) = R(1,1) + (-wr/2)*((const2 - R(1,2))/(375 +(lc/2) - R(1,2)));P8(1,2) = const2;

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1)];
Y = [P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2)];
Z = [z z z z z z z z];

end



if (R(1,2)<=1125+(la/2)) && (R(1,2)>=1125-(la/2)) && (R(1,2)<=1125+(ld/2)) && (R(1,2)>=1125-(ld/2)) 

P1(1,1) = const2; P1(1,2) = R(1,2) + (-wrs/2)*((const2 - R(1,1))/(1125+(wb/2)- R(1,1)));

P2(1,1) = R(1,1) + (1125+(wb/2)- R(1,1))*(z/hb);P2(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P3(1,1) =R(1,1) + (wr/2)*(z/hb);P3(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P4(1,1) = R(1,1) + (wr/2)*(z/hb);P4(1,2) = R(1,2) + (375 - (lb/2) - R(1,2))*(z/hb);

P5(1,1) = R(1,1) + (wr/2)*((const1 - R(1,2))/(375 -(lb/2) - R(1,2)));P5(1,2) = const1;

P6(1,1) = R(1,1) + (-wr/2)*((const1 - R(1,2))/(375 -(lc/2) - R(1,2)));P6(1,2) = const1;

P7(1,1) = R(1,1) + (-wr/2)*(z/hc);P7(1,2) = R(1,2) + (375 -(lc/2) - R(1,2))*(z/hc);

P8(1,1) = R(1,1) + (-wr/2)*(z/hc);P8(1,2) = R(1,2) + (-wrs/2)*(z/hc);

P9(1,1) = R(1,1) + (375 - (wc/2) - R(1,1))*(z/hc);P9(1,2) = R(1,2) + (-wrs/2)*(z/hc);

P10(1,1) = const1;P10(1,2) = R(1,2) + (-wrs/2)*((const1 - R(1,1))/(375 -(wc/2) - R(1,1)));


X = [1500 P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1) P9(1,1) P10(1,1) 0];
Y = [1500 P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2) P9(1,2) P10(1,2) 1500];
Z = [z z z z z z z z z z z z];

end



if (R(1,2)<=375+(lb/2)) && (R(1,2)>=375-(lb/2)) && (R(1,2)<=375+(lc/2)) && (R(1,2)>=375-(lc/2)) 

P1(1,1) = R(1,1) + (wr/2)*((const2 - R(1,2))/(1125+(la/2) - R(1,2)));P1(1,2) = const2;

P2(1,1) = R(1,1) + (wr/2)*(z/ha);P2(1,2) = R(1,2) + (1125+(la/2)- R(1,2))*(z/ha);

P3(1,1) = R(1,1) + (wr/2)*(z/ha);P3(1,2) = R(1,2) + (wrs/2)*(z/ha);

P4(1,1) = R(1,1) + (1125 +(wa/2) - R(1,1))*(z/ha);P4(1,2) = R(1,2) + (wrs/2)*(z/ha);

P5(1,1) = const2; P5(1,2) = R(1,2) + (wrs/2)*((const2 - R(1,1))/(1125 +(wa/2) - R(1,1)));

P6(1,1) = const1;P6(1,2) = R(1,2) + (wrs/2)*((const1 - R(1,1))/(375 -(wd/2) - R(1,1)));

P7(1,1) = R(1,1) + (375 -(wd/2) - R(1,1))*(z/hd);P7(1,2) = R(1,2) + (wrs/2)*(z/hd);

P8(1,1) = R(1,1) + (-wr/2)*(z/hd);P8(1,2) = R(1,2) + (wrs/2)*(z/hd);

P9(1,1) = R(1,1) + (-wr/2)*(z/hd);P9(1,2) = R(1,2) + (1125 +(ld/2) - R(1,2))*(z/hd);

P10(1,1) = R(1,1) + (-wr/2)*((const2 - R(1,2))/(1125 +(ld/2) - R(1,2)));P10(1,2) = const2;

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) 1500 0 P6(1,1) P7(1,1) P8(1,1) P9(1,1) P10(1,1)];
Y = [P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) 0 0 P6(1,2) P7(1,2) P8(1,2) P9(1,2) P10(1,2)];
Z = [z z z z z z z z z z z z];

end



if (R(1,2)<=1125+(la/2)) && (R(1,2)>=1125-(la/2)) && (R(1,2)<=1125+(ld/2)) && (R(1,2)>=1125-(ld/2)) 

P1(1,1) = R(1,1) + (wr/2)*((const1 - R(1,2))/(375+(lb/2) - R(1,2)));P1(1,2) = const1;

P2(1,1) = R(1,1) + (wr/2)*(z/hb);P2(1,2) = R(1,2) + (375+(lb/2)- R(1,2))*(z/hb);

P3(1,1) = R(1,1) + (wr/2)*(z/hb);P3(1,2) = R(1,2) + (375 - (lb/2) - R(1,2))*(z/hb);

P4(1,1) = R(1,1) + (wr/2)*((const1 - R(1,2))/(375 -(lb/2) - R(1,2)));P4(1,2) = const1;

P5(1,1) = R(1,1) + (-wr/2)*((const1 - R(1,2))/(375 -(lc/2) - R(1,2)));P5(1,2) = const1;

P6(1,1) = R(1,1) + (-wr/2)*(z/hc);P6(1,2) = R(1,2) + (375 -(lc/2) - R(1,2))*(z/hc);

P7(1,1) = R(1,1) + (-wr/2)*(z/hc);P7(1,2) = R(1,2) + (375 +(lc/2) - R(1,2))*(z/hc);

P8(1,1) = R(1,1) + (-wr/2)*((const1 - R(1,2))/(375 +(lc/2) - R(1,2)));P8(1,2) = const1;

X = [1500 1500 P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1) 0 0];
Y = [1500 0 P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2) 0 1500];
Z = [z z z z z z z z z z z z];

end



if (R(1,2)<=375+(lb/2)) && (R(1,2)>=375-(lb/2)) && (R(1,2)<=375+(lc/2)) && (R(1,2)>=375-(lc/2)) 

P1(1,1) = R(1,1) + (wr/2)*((const2 - R(1,2))/(1125+(la/2) - R(1,2)));P1(1,2) = const2;

P2(1,1) = R(1,1) + (wr/2)*(z/ha);P2(1,2) = R(1,2) + (1125+(la/2)- R(1,2))*(z/ha);

P3(1,1) = R(1,1) + (wr/2)*(z/ha);P3(1,2) = R(1,2) + (1125 - (la/2) - R(1,2))*(z/ha);

P4(1,1) = R(1,1) + (wr/2)*((const2 - R(1,2))/(1125 -(la/2) - R(1,2)));P4(1,2) = const2;

P5(1,1) = R(1,1) + (-wr/2)*((const2 - R(1,2))/(1125 -(ld/2) - R(1,2)));P5(1,2) = const2;

P6(1,1) = R(1,1) + (-wr/2)*(z/hd);P6(1,2) = R(1,2) + (1125 -(ld/2) - R(1,2))*(z/hd);

P7(1,1) = R(1,1) + (-wr/2)*(z/hd);P7(1,2) = R(1,2) + (1125 +(ld/2) - R(1,2))*(z/hd);

P8(1,1) = R(1,1) + (-wr/2)*((const2 - R(1,2))/(1125 +(ld/2) - R(1,2)));P8(1,2) = const2;

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) 1500 1500 0 0 P5(1,1) P6(1,1) P7(1,1) P8(1,1)];
Y = [P1(1,2) P2(1,2) P3(1,2) P4(1,2) 1500 0 0 1500 P5(1,2) P6(1,2) P7(1,2) P8(1,2)];
Z = [z z z z z z z z z z z z];

end





if (R(1,1)<1000+(wa/2)) && (R(1,1)>=1000-(wa/2)) && (R(1,1)<=1000+(wb/2)) && (R(1,1)>=1000-(wb/2)) 

P1(1,1) = const2; P1(1,2) = R(1,2) + (-wrs/2)*((const2 - R(1,1))/(1000+(wb/2)- R(1,1)));

P2(1,1) = R(1,1) + (1000+(wb/2)- R(1,1))*(z/hb);P2(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P3(1,1) = R(1,1) + (1000 - (wb/2) - R(1,1))*(z/hb);P3(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P4(1,1) = const1;P4(1,2) = R(1,2) + (-wrs/2)*((const1 - R(1,1))/(1000 -(wb/2) - R(1,1)));

P5(1,1) = const1;P5(1,2) = R(1,2) + (wrs/2)*((const1 - R(1,1))/(1000 -(wa/2) - R(1,1)));

P6(1,1) = R(1,1) + (1000 -(wa/2) - R(1,1))*(z/ha);P6(1,2) = R(1,2) + (wrs/2)*(z/ha);

P7(1,1) = R(1,1) + (1000 +(wa/2) - R(1,1))*(z/ha);P7(1,2) = R(1,2) + (wrs/2)*(z/ha);

P8(1,1) = const2; P8(1,2) = R(1,2) + (wrs/2)*((const2 - R(1,1))/(1000 +(wa/2) - R(1,1)));

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1)];
Y = [P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2)];
Z = [z z z z z z z z];

end

R(1,1) = 1000 - (wb/2) + 0.00001;

if (R(1,1)<1000+(wa/2)) && (R(1,1)>=1000-(wa/2)) && (R(1,1)<=1000+(wb/2)) && (R(1,1)>=1000-(wb/2)) 

P1(1,1) = const2; P1(1,2) = R(1,2) + (-wrs/2)*((const2 - R(1,1))/(1000+(wb/2)- R(1,1)));

P2(1,1) = R(1,1) + (1000+(wb/2)- R(1,1))*(z/hb);P2(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P3(1,1) = R(1,1) + (1000 - (wb/2) - R(1,1))*(z/hb);P3(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P4(1,1) = const1;P4(1,2) = R(1,2) + (-wrs/2)*((const1 - R(1,1))/(1000 -(wb/2) - R(1,1)));

P5(1,1) = const1;P5(1,2) = R(1,2) + (wrs/2)*((const1 - R(1,1))/(1000 -(wa/2) - R(1,1)));

P6(1,1) = R(1,1) + (1000 -(wa/2) - R(1,1))*(z/ha);P6(1,2) = R(1,2) + (wrs/2)*(z/ha);

P7(1,1) = R(1,1) + (1000 +(wa/2) - R(1,1))*(z/ha);P7(1,2) = R(1,2) + (wrs/2)*(z/ha);

P8(1,1) = const2; P8(1,2) = R(1,2) + (wrs/2)*((const2 - R(1,1))/(1000 +(wa/2) - R(1,1)));

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1)];
Y = [P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2)];
Z = [z z z z z z z z];

end




if (R(1,1)<=450+(wc/2)) && (R(1,1)>=450-(wc/2)) && (R(1,1)<=450+(wd/2)) && (R(1,1)>=450-(wd/2)) 

P1(1,1) = const2; P1(1,2) = R(1,2) + (-wrs/2)*((const2 - R(1,1))/(450+(wc/2)- R(1,1)));

P2(1,1) = R(1,1) + (450+(wc/2)- R(1,1))*(z/hc);P2(1,2) = R(1,2) + (-wrs/2)*(z/hc);

P3(1,1) = R(1,1) + (450 - (wc/2) - R(1,1))*(z/hc);P3(1,2) = R(1,2) + (-wrs/2)*(z/hc);

P4(1,1) = const1;P4(1,2) = R(1,2) + (-wrs/2)*((const1 - R(1,1))/(450 -(wc/2) - R(1,1)));

P5(1,1) = const1;P5(1,2) = R(1,2) + (wrs/2)*((const1 - R(1,1))/(450 -(wd/2) - R(1,1)));

P6(1,1) = R(1,1) + (450 -(wd/2) - R(1,1))*(z/hd);P6(1,2) = R(1,2) + (wrs/2)*(z/hd);

P7(1,1) = R(1,1) + (450 +(wd/2) - R(1,1))*(z/hd);P7(1,2) = R(1,2) + (wrs/2)*(z/hd);

P8(1,1) = const2; P8(1,2) = R(1,2) + (wrs/2)*((const2 - R(1,1))/(450 +(wd/2) - R(1,1)));

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1)];
Y = [P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2)];
Z = [z z z z z z z z];

end




if (R(1,1)<=450+(wc/2)) && (R(1,1)>=450-(wc/2)) && (R(1,1)<=450+(wd/2)) && (R(1,1)>=450-(wd/2)) 

P1(1,1) = const2; P1(1,2) = R(1,2) + (-wrs/2)*((const2 - R(1,1))/(450+(wc/2)- R(1,1)));

P2(1,1) = R(1,1) + (450+(wc/2)- R(1,1))*(z/hc);P2(1,2) = R(1,2) + (-wrs/2)*(z/hc);

P3(1,1) = R(1,1) + (450 - (wc/2) - R(1,1))*(z/hc);P3(1,2) =  R(1,2) + (-wrs/2)*(z/hc);

P4(1,1) = R(1,1) + (450 - (wc/2) - R(1,1))*(z/hc);P4(1,2) = R(1,2) + (-wrs/2)*(z/hc);

P5(1,1) = const1;P5(1,2) = R(1,2) + (-wrs/2)*((const1 - R(1,1))/(450 -(wc/2) - R(1,1)));

P6(1,1) = R(1,1) + (450 -(wd/2) - R(1,1))*(z/hd);P6(1,2) = R(1,2) + (wrs/2)*(z/hd);

P7(1,1) = R(1,1) + (450 +(wd/2) - R(1,1))*(z/hd);P7(1,2) = R(1,2) + (wrs/2)*(z/hd);

P8(1,1) = const2; P8(1,2) = R(1,2) + (wrs/2)*((const2 - R(1,1))/(450 +(wd/2) - R(1,1)));

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1)];
Y = [P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2)];
Z = [z z z z z z z z];

end



if (R(1,1)<1000+(wa/2)) && (R(1,1)>=1000-(wa/2)) && (R(1,1)<=1000+(wb/2)) && (R(1,1)>=1000-(wb/2)) 

P1(1,1) = R(1,1) + (-wr/2)*((const1 - R(1,2))/(450 -(lc/2) - R(1,2)));P1(1,2) = const1;

P2(1,1) = R(1,1) + (-wr/2)*(z/hc);P2(1,2) = R(1,2) + (450 -(lc/2) - R(1,2))*(z/hc);

P3(1,1) = R(1,1) + (-wr/2)*(z/hc);P3(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P4(1,1) = const1;P4(1,2) = R(1,2) + (-wrs/2)*((const1 - R(1,1))/(1000 -(wb/2) - R(1,1)));

P5(1,1) = const1;P5(1,2) = R(1,2) + (wrs/2)*((const1 - R(1,1))/(1000 -(wa/2) - R(1,1)));

P6(1,1) = const1;P6(1,2) = R(1,2) + (wrs/2)*((const1 - R(1,1))/(450 -(wd/2) - R(1,1)));

P7(1,1) = R(1,1) + (450 -(wd/2) - R(1,1))*(z/hd);P7(1,2) = R(1,2) + (wrs/2)*(z/hd);

P8(1,1) = R(1,1) + (-wr/2)*(z/hd); P8(1,2) = R(1,2) + (wrs/2)*(z/hd);

P9(1,1) = R(1,1) + (-wr/2)*(z/hd);P9(1,2) = R(1,2) + (1000 +(ld/2) - R(1,2))*(z/hd);

P10(1,1) = R(1,1) + (-wr/2)*((const2 - R(1,2))/(1000 +(ld/2) - R(1,2)));P10(1,2) = const2;

X = [1500 P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1) P9(1,1) P10(1,1) 1500];
Y = [0 P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2) P9(1,2) P10(1,2) 1500];
Z = [z z z z z z z z z z z z];

end



if (R(1,1)<=450+(wc/2)) && (R(1,1)>=450-(wc/2)) && (R(1,1)<=450+(wd/2)) && (R(1,1)>=450-(wd/2)) 

P1(1,1) = const2; P1(1,2) = R(1,2) + (-wrs/2)*((const2 - R(1,1))/(1000+(wb/2)- R(1,1)));

P2(1,1) = R(1,1) + (1000+(wb/2)- R(1,1))*(z/hb);P2(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P3(1,1) = R(1,1) + (wr/2)*(z/hb);P3(1,2) =  R(1,2) + (-wrs/2)*(z/hb);

P4(1,1) = R(1,1) + (wr/2)*(z/hb);P4(1,2) = R(1,2) + (450 - (lb/2) - R(1,2))*(z/hb);

P5(1,1) = R(1,1) + (wr/2)*((const1 - R(1,2))/(450 -(lb/2) - R(1,2)));P5(1,2) = const1;

P6(1,1) = R(1,1) + (wr/2)*((const2 - R(1,2))/(1000+(la/2) - R(1,2)));P6(1,2) = const2;

P7(1,1) = R(1,1) + (wr/2)*(z/ha);P7(1,2) = R(1,2) + (1000+(la/2)- R(1,2))*(z/ha);

P8(1,1) = R(1,1) + (wr/2)*(z/ha); P8(1,2) = R(1,2) + (wrs/2)*(z/ha);

P9(1,1) = R(1,1) + (1000 +(wa/2) - R(1,1))*(z/ha);P9(1,2) = R(1,2) + (wrs/2)*(z/ha);

P10(1,1) = const2; P10(1,2) = R(1,2) + (wrs/2)*((const2 - R(1,1))/(1000 +(wa/2) - R(1,1)));

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) 0 0 P6(1,1) P7(1,1) P8(1,1) P9(1,1) P10(1,1)];
Y = [P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) 0 1500 P6(1,2) P7(1,2) P8(1,2) P9(1,2) P10(1,2)];
Z = [z z z z z z z z z z z z];

end


if (R(1,1)<=1000 + (wb/2)) && (R(1,1)>=1000-(wb/2)) && (R(1,1)<=1000+(wa/2)) && (R(1,1)>=1000-(wa/2)) 

P1(1,1) = const1; P1(1,2) = R(1,2) + (-wrs/2)*((const1 - R(1,1))/(450+(wc/2)- R(1,1)));

P2(1,1) = R(1,1) + (450+(wc/2)- R(1,1))*(z/hc);P2(1,2) = R(1,2) + (-wrs/2)*(z/hc);

P3(1,1) = R(1,1) + (450 - (wc/2) - R(1,1))*(z/hc);P3(1,2) = R(1,2) + (-wrs/2)*(z/hc);

P4(1,1) = const1;P4(1,2) = R(1,2) + (-wrs/2)*((const1 - R(1,1))/(450 -(wc/2) - R(1,1)));

P5(1,1) = const1;P5(1,2) = R(1,2) + (wrs/2)*((const1 - R(1,1))/(450 -(wd/2) - R(1,1)));

P6(1,1) = R(1,1) + (450 -(wd/2) - R(1,1))*(z/hd);P6(1,2) = R(1,2) + (wrs/2)*(z/hd);

P7(1,1) = R(1,1) + (450 +(wd/2) - R(1,1))*(z/hd);P7(1,2) = R(1,2) + (wrs/2)*(z/hd);

P8(1,1) = const1; P8(1,2) = R(1,2) + (wrs/2)*((const1 - R(1,1))/(450 +(wd/2) - R(1,1)));

X = [1500 0 P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1) 0 1500];
Y = [0 0 P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2) 1500 1500];
Z = [z z z z z z z z z z z z];

end



if (R(1,1)<450+(wc/2)) && (R(1,1)>=450-(wc/2)) && (R(1,1)<=450+(wd/2)) && (R(1,1)>=450-(wd/2)) 

P1(1,1) = const2; P1(1,2) = R(1,2) + (-wrs/2)*((const2 - R(1,1))/(1000+(wb/2)- R(1,1)));

P2(1,1) = R(1,1) + (1000+(wb/2)- R(1,1))*(z/hb);P2(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P3(1,1) = R(1,1) + (1000 - (wb/2) - R(1,1))*(z/hb);P3(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P4(1,1) = const2;P4(1,2) = R(1,2) + (-wrs/2)*((const2 - R(1,1))/(1000 -(wb/2) - R(1,1)));

P5(1,1) = const2;P5(1,2) = R(1,2) + (wrs/2)*((const2 - R(1,1))/(1000 -(wa/2) - R(1,1)));

P6(1,1) = R(1,1) + (1000 -(wa/2) - R(1,1))*(z/ha);P6(1,2) = R(1,2) + (wrs/2)*(z/ha);

P7(1,1) = R(1,1) + (1000 +(wa/2) - R(1,1))*(z/ha);P7(1,2) = R(1,2) + (wrs/2)*(z/ha);

P8(1,1) = const2; P8(1,2) = R(1,2) + (wrs/2)*((const2 - R(1,1))/(1000 +(wa/2) - R(1,1)));

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) 1500 0 0 1500 P5(1,1) P6(1,1) P7(1,1) P8(1,1)];
Y = [P1(1,2) P2(1,2) P3(1,2) P4(1,2) 0 0 1500 1500 P5(1,2) P6(1,2) P7(1,2) P8(1,2)];
Z = [z z z z z z z z z z z z];

end



if (R(1,1)>=650) && (R(1,1)<=750) && (R(1,1)<=975) && (R(1,1)>=525)
 
P1(1,1) = R(1,1) + (wr/2)*((const2 - R(1,2))/(1125+(la/2) - R(1,2)));P1(1,2) = const2;

P2(1,1) = R(1,1) + (wr/2)*(z/ha);P2(1,2) = R(1,2) + (1125+(la/2)- R(1,2))*(z/ha);

P3(1,1) = R(1,1) + (wr/2)*(z/ha);P3(1,2) = R(1,2) + (wrs/2)*(z/ha);

P4(1,1) = R(1,1) + (1125 +(wa/2) - R(1,1))*(z/ha);P4(1,2) = R(1,2) + (wrs/2)*(z/ha);

P5(1,1) = const2; P5(1,2) = R(1,2) + (wrs/2)*((const2 - R(1,1))/(1125 +(wa/2) - R(1,1)));

P6(1,1) = const2; P6(1,2) = R(1,2) + (-wrs/2)*((const2 - R(1,1))/(1125+(wb/2)- R(1,1)));

P7(1,1) = R(1,1) + (1125+(wb/2)- R(1,1))*(z/hb);P7(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P8(1,1) = R(1,1) + (wr/2)*(z/hb); P8(1,2) = R(1,2) + (-wrs/2)*(z/hb);

P9(1,1) = R(1,1) + (wr/2)*(z/hb);P9(1,2) = R(1,2) + (450 - (lb/2) - R(1,2))*(z/hb);

P10(1,1) = R(1,1) + (wr/2)*((const1 - R(1,2))/(450 -(lb/2) - R(1,2)));P10(1,2) = const1;

P11(1,1) = R(1,1) + (-wr/2)*((const1 - R(1,2))/(450 -(lc/2) - R(1,2)));P11(1,2) = const1;

P12(1,1) = R(1,1) + (-wr/2)*(z/hc);P12(1,2) = R(1,2) + (450 -(lc/2) - R(1,2))*(z/hc);

P13(1,1) = R(1,1) + (-wr/2)*(z/hc);P13(1,2) = R(1,2) + (-wrs/2)*(z/hc);

P14(1,1) = R(1,1) + (450 - (wc/2) - R(1,1))*(z/hc);P14(1,2) = R(1,2) + (-wrs/2)*(z/hc);

P15(1,1) = const1;P15(1,2) = R(1,2) + (-wrs/2)*((const1 - R(1,1))/(375 -(wc/2) - R(1,1)));

P16(1,1) = const1;P16(1,2) = R(1,2) + (wrs/2)*((const1 - R(1,1))/(375 -(wd/2) - R(1,1)));

P17(1,1) = R(1,1) + (375 -(wd/2) - R(1,1))*(z/hd);P17(1,2) = R(1,2) + (wrs/2)*(z/hd);

P18(1,1) = R(1,1) + (-wr/2)*(z/hd);P18(1,2) = R(1,2) + (wrs/2)*(z/hd); 

P19(1,1) = R(1,1) + (-wr/2)*(z/hd);P19(1,2) = R(1,2) + (1125 +(ld/2) - R(1,2))*(z/hd);

P20(1,1) = R(1,1) + (-wr/2)*((const2 - R(1,2))/(1125 +(ld/2) - R(1,2)));P20(1,2) = const2;

X = [P1(1,1) P2(1,1) P3(1,1) P4(1,1) P5(1,1) P6(1,1) P7(1,1) P8(1,1) P9(1,1) P10(1,1) P11(1,1) P12(1,1) P13(1,1) P14(1,1) P15(1,1) P16(1,1) P17(1,1) P18(1,1) P19(1,1) P20(1,1) ];
Y = [P1(1,2) P2(1,2) P3(1,2) P4(1,2) P5(1,2) P6(1,2) P7(1,2) P8(1,2) P9(1,2) P10(1,2) P11(1,2) P12(1,2) P13(1,2) P14(1,2) P15(1,2) P16(1,2) P17(1,2) P18(1,2) P19(1,2) P20(1,2) ];
Z = [z z z z z z z z z z z z z z z z z z z z];

end




num = numel(X);

for too = 1:1:num;
    Z(too,1) = z;
end

patch(X,Y,Z,'green');

axis([0 1500 0 1500 0 z]);
axis equal;

hold on




voxel(a + [-wa/2,-la/2,0],[wa la ha],'c',0.7);
voxel(b + [-wb/2,-lb/2,0],[wb lb hb],'c',0.7);
voxel(c + [-wc/2,-lc/2,0],[wc lc hc],'c',0.7);
voxel(d + [-wd/2,-ld/2,0],[wd ld hd],'c',0.7);


